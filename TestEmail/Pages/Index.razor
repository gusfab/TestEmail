@page "/"
@using TestEmail.Models
@using TestEmail.Services
@inject IEmailSenderService EmailSenderService

<h1>Hello, world!</h1>

<EditForm Model="@mail" OnValidSubmit="SendEmail">
    <table class="table">
        <tr>
            <td>Email:</td>
            <td>
                <input type="text" @bind="mail.Email"/>
            </td>
        </tr>
        <tr>
            <td>Subject</td>
            <td>
                <input type="text" @bind="mail.Subject"/>
            </td>
        </tr>
        <tr>
            <td>Body</td>
            <td>
                <input type="text" @bind="mail.Body"/>
            </td>
        </tr>
        <tr>
            <button type="submit" class="btn btn-primary">Envoyer</button>
            @*<input type="submit" class="btn btn-primary" value="Send"/>*@
        </tr>
    </table>
</EditForm>

@code{
    MailRequest mail = new MailRequest();

    private void SendEmail()
    {
        EmailSenderService.SendEmailAsync(mail);
    }
}